<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>
      Kaathadi Tech Solution | Best Web Design Company in Tenkasi & Tirunelveli
    </title>
    <meta
      name="description"
      content="Kaathadi Tech Solution - The best web design company in Tenkasi and Tirunelveli, offering custom and affordable website design solutions."
    />
    <meta
      name="keywords"
      content="Kaathadi Tech Solution, web design Tenkasi, web design Tirunelveli, best web design company, website development Tenkasi"
    />
    <meta name="author" content="Kaathadi Tech Solution" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Inter:slnt,wght@-10..0,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Icon Font Stylesheet -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <link rel="stylesheet" href="lib/animate/animate.min.css" />
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet" />
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet" />
  </head>

  <body>
    <!-- Blog Details Container -->
    <div id="blog-detail" class="container py-5">
      <div id="blog-content">
        <!-- The blog content will be rendered here -->
      </div>
    </div>

    <!-- Footer Start -->
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
      <div class="container py-5">
        <div class="row g-5">
          <div class="col-xl-9">
            <div class="mb-5">
              <div class="row g-4">
                <div class="col-md-6 col-lg-6 col-xl-5">
                  <div class="footer-item">
                    <a href="index.html" class="p-0">
                      <h3 class="text-white">
                        <!-- <img src="./img/logo.png" alt="" width="28" />  -->
                        Kaathadi
                      </h3>
                      <!-- <img src="img/logo.png" alt="Logo"> -->
                    </a>
                    <p class="text-white mb-4">
                      We design professional websites for small businesses and
                      startups. Based in Tamil Nadu, serving clients across
                      India.
                    </p>
                    <div class="footer-btn d-flex">
                      <a class="btn btn-md-square rounded-circle me-3" href="#"
                        ><i class="fab fa-facebook-f"></i
                      ></a>
                      <a
                        class="btn btn-md-square rounded-circle me-3"
                        href="https://x.com/KaathadiTech"
                        ><i class="fab fa-twitter"></i
                      ></a>
                      <a
                        class="btn btn-md-square rounded-circle me-3"
                        href="https://www.instagram.com/kaathaditechsolutions/"
                        ><i class="fab fa-instagram"></i
                      ></a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                  <div class="footer-item">
                    <h4 class="text-white mb-4">Useful Links</h4>
                    <a href="./about.html"
                      ><i class="fas fa-angle-right me-2"></i> About Us</a
                    >
                    <a href="./feature.html"
                      ><i class="fas fa-angle-right me-2"></i> Features</a
                    >
                    <a href="./service.html"
                      ><i class="fas fa-angle-right me-2"></i> Services</a
                    >
                    <a href="./FAQ.html"
                      ><i class="fas fa-angle-right me-2"></i> FAQ's</a
                    >
                    <!-- <a href="./blog.html"
                        ><i class="fas fa-angle-right me-2"></i> Blogs</a
                      > -->
                    <a href="./contact.html"
                      ><i class="fas fa-angle-right me-2"></i> Contact</a
                    >
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-4">
                  <div class="footer-item">
                    <h4 class="mb-4 text-white">Instagram</h4>
                    <div class="row g-3">
                      <div class="col-4">
                        <div class="footer-instagram rounded">
                          <img
                            src="img/instagram-footer-1.jpg"
                            class="img-fluid w-100"
                            alt=""
                          />
                          <div class="footer-search-icon">
                            <a
                              href="img/instagram-footer-1.jpg"
                              data-lightbox="footerInstagram-1"
                              class="my-auto"
                              ><i class="fas fa-link text-white"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                      <div class="col-4">
                        <div class="footer-instagram rounded">
                          <img
                            src="img/instagram-footer-2.jpg"
                            class="img-fluid w-100"
                            alt=""
                          />
                          <div class="footer-search-icon">
                            <a
                              href="img/instagram-footer-2.jpg"
                              data-lightbox="footerInstagram-2"
                              class="my-auto"
                              ><i class="fas fa-link text-white"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                      <div class="col-4">
                        <div class="footer-instagram rounded">
                          <img
                            src="img/instagram-footer-3.jpg"
                            class="img-fluid w-100"
                            alt=""
                          />
                          <div class="footer-search-icon">
                            <a
                              href="img/instagram-footer-3.jpg"
                              data-lightbox="footerInstagram-3"
                              class="my-auto"
                              ><i class="fas fa-link text-white"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                      <div class="col-4">
                        <div class="footer-instagram rounded">
                          <img
                            src="img/instagram-footer-4.jpg"
                            class="img-fluid w-100"
                            alt=""
                          />
                          <div class="footer-search-icon">
                            <a
                              href="img/instagram-footer-4.jpg"
                              data-lightbox="footerInstagram-4"
                              class="my-auto"
                              ><i class="fas fa-link text-white"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                      <div class="col-4">
                        <div class="footer-instagram rounded">
                          <img
                            src="img/instagram-footer-5.jpg"
                            class="img-fluid w-100"
                            alt=""
                          />
                          <div class="footer-search-icon">
                            <a
                              href="img/instagram-footer-5.jpg"
                              data-lightbox="footerInstagram-5"
                              class="my-auto"
                              ><i class="fas fa-link text-white"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                      <div class="col-4">
                        <div class="footer-instagram rounded">
                          <img
                            src="img/instagram-footer-6.jpg"
                            class="img-fluid w-100"
                            alt=""
                          />
                          <div class="footer-search-icon">
                            <a
                              href="img/instagram-footer-6.jpg"
                              data-lightbox="footerInstagram-6"
                              class="my-auto"
                              ><i class="fas fa-link text-white"></i
                            ></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="pt-5"
              style="border-top: 1px solid rgba(255, 255, 255, 0.08)"
            >
              <div class="row g-0">
                <div class="col-12">
                  <div class="row g-4">
                    <div class="col-lg-6 col-xl-4">
                      <div class="d-flex">
                        <div
                          class="btn-xl-square bg-primary text-white rounded p-4 me-4"
                        >
                          <i class="fas fa-map-marker-alt fa-2x"></i>
                        </div>
                        <div>
                          <h4 class="text-white">Address</h4>
                          <p class="mb-0">9/117, kelaiyapillaiyoor, Tenkasi</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-xl-4">
                      <div class="d-flex">
                        <div
                          class="btn-xl-square bg-primary text-white rounded p-4 me-4"
                        >
                          <i class="fas fa-envelope fa-2x"></i>
                        </div>
                        <div>
                          <h4 class="text-white">Mail Us</h4>
                          <p class="mb-0">kaathaditechsolutions@gmail.com</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-xl-4">
                      <div class="d-flex">
                        <div
                          class="btn-xl-square bg-primary text-white rounded p-4 me-4"
                        >
                          <i class="fa fa-phone-alt fa-2x"></i>
                        </div>
                        <div>
                          <h4 class="text-white">Telephone</h4>
                          <p class="mb-0">(+91) 9445248526</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xl-3">
            <div class="footer-item">
              <h4 class="text-white mb-4">Newsletter</h4>
              <p class="text-white mb-3">
                Get the latest trends, updates, and tips on web design and
                digital marketing directly in your inbox. Join our newsletter
                for exclusive insights and offers from Kaathadi Tech Solutions.
              </p>
              <div class="position-relative rounded-pill mb-4">
                <input
                  class="form-control rounded-pill w-100 py-3 ps-4 pe-5"
                  type="text"
                  placeholder="Enter your email"
                />
                <button
                  type="button"
                  class="btn btn-primary rounded-pill position-absolute top-0 end-0 py-2 mt-2 me-2"
                >
                  SignUp
                </button>
              </div>
              <div class="d-flex flex-shrink-0">
                <div class="footer-btn">
                  <a
                    href="#"
                    class="btn btn-lg-square rounded-circle position-relative wow tada"
                    data-wow-delay=".9s"
                  >
                    <i class="fa fa-phone-alt fa-2x"></i>
                    <div
                      class="position-absolute"
                      style="top: 2px; right: 12px"
                    >
                      <span><i class="fa fa-comment-dots"></i></span>
                    </div>
                  </a>
                </div>
                <div class="d-flex flex-column ms-3 flex-shrink-0">
                  <span>Call to Our Experts</span>
                  <a href="tel:+91 9445248526"
                    ><span class="text-white">Free: +91 9445248526</span></a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer End -->

    <!-- Copyright Start -->
    <div class="container-fluid copyright py-4">
      <div class="container">
        <div class="row g-4 align-items-center justify-content-center">
          <div class="col-md-12 text-center mb-md-0">
            <span class="text-body"
              ><a href="#" class="border-bottom text-white"
                ><i class="fas fa-copyright text-light me-2"></i>Kaathadi Tech
                Solutions</a
              >, All right reserved.</span
            >
          </div>
          <!-- <div class="col-md-6 text-center text-md-start text-body"> -->
          <!--/*** This template is free as long as you keep the below author’s credit link/attribution link/backlink. ***/-->
          <!--/*** If you'd like to use the template without the below author’s credit link/attribution link/backlink, ***/-->
          <!--/*** you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". ***/-->
          <!-- Designed By
              <a class="border-bottom text-white" href="https://htmlcodex.com"
                >HTML Codex</a
              >
            </div> -->
        </div>
      </div>
    </div>
    <!-- Copyright End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary btn-lg-square rounded-circle back-to-top"
      ><i class="fa fa-arrow-up"></i
    ></a>

    <script>
      // Function to fetch single blog based on slug
      function fetchBlogDetail(slug) {
        fetch(
          `https://life-insurance-website-template-uthayas-projects-5d5b23e4.vercel.app/api/blogs/${slug}`
        )
          .then((response) => {
            if (!response.ok) {
              throw new Error("Blog not found");
            }
            return response.json();
          })
          .then((result) => {
            console.log("Fetched single blog data:", result);

            if (!result || !result.items || result.items.length === 0) {
              console.error("No blog found with the provided slug.");
              return;
            }

            const blogItem = transformBlogData(
              result.items[0],
              result.includes
            );
            renderBlogDetail(blogItem);
          })
          .catch((err) => console.error("Error fetching blog details:", err));
      }

      // Extract slug from query string
      function getBlogSlugFromUrl() {
        const params = new URLSearchParams(window.location.search);
        const slug = params.get("slug");
        console.log(slug, "slug from query string");
        return slug;
      }

      // Transform raw Contentful blog data into usable format
      function transformBlogData(item, includes) {
        const fields = item.fields;
        return {
          blogTitle: fields.blogTitle || "Untitled",
          blogDescription: fields.blogDescription || {},
          blogAuthor: fields.blogAuthor || "Admin",
          blogDate: fields.blogDate,
          blogThumbnailImage: fields.blogThumbnailImage
            ? getImageUrl(fields.blogThumbnailImage, includes)
            : null,
        };
      }

      // Get image URL from includes
      function getImageUrl(imageField, includes) {
        if (!includes || !includes.Asset) return null;

        const asset = includes.Asset.find(
          (a) => a.sys.id === imageField.sys.id
        );
        return asset ? `https:${asset.fields.file.url}` : null;
      }

      // Render single blog details
      function renderBlogDetail(blogItem) {
        const blogDetailContainer = document.getElementById("blog-content");

        const blogTitle = blogItem.blogTitle;
        const blogDescription = convertRichTextToHtml(blogItem.blogDescription);
        const blogAuthor = blogItem.blogAuthor;
        const blogDate = formatDate(blogItem.blogDate);
        const blogThumbnailImage = blogItem.blogThumbnailImage;

        blogDetailContainer.innerHTML = `
          <h1 class="display-4 mb-4">${blogTitle}</h1>
          <div class="small text-muted mb-4">
            <span class="fa fa-user text-primary"></span> ${blogAuthor} | 
            <span class="fa fa-calendar text-primary"></span> ${blogDate}
          </div>
          ${
            blogThumbnailImage
              ? `<img src="${blogThumbnailImage}" class="img-fluid rounded mb-4" alt="${blogTitle}" />`
              : ""
          }
          <div class="blog-description">${blogDescription}</div>
        `;
      }

      // Convert rich text to HTML
      function convertRichTextToHtml(richText) {
        if (!richText || !richText.content) return "";

        let htmlContent = "";

        richText.content.forEach((node) => {
          if (node.nodeType === "paragraph") {
            let paragraph = "";
            node.content.forEach((textNode) => {
              if (textNode.nodeType === "text") {
                const text = textNode.value;
                const hasBold = textNode.marks.some((m) => m.type === "bold");
                const hasItalic = textNode.marks.some(
                  (m) => m.type === "italic"
                );

                let finalText = text;
                if (hasBold) finalText = `<strong>${finalText}</strong>`;
                if (hasItalic) finalText = `<em>${finalText}</em>`;

                paragraph += finalText;
              }
            });
            htmlContent += `<p>${paragraph}</p>`;
          }
        });

        return htmlContent;
      }

      // Format date
      function formatDate(dateString) {
        if (!dateString) return "";
        const options = { day: "numeric", month: "short", year: "numeric" };
        return new Date(dateString).toLocaleDateString("en-US", options);
      }

      // Run on page load
      document.addEventListener("DOMContentLoaded", function () {
        const slug = getBlogSlugFromUrl();
        if (slug) {
          fetchBlogDetail(slug);
        } else {
          console.error("No slug found in URL.");
        }
      });
    </script>
  </body>
</html>
